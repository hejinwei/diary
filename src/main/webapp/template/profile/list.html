<% var pageLevelCSS = { %> <%};%> <% var pageLevelJS = { %>

<script type="text/javascript">
	jQuery(document).ready(function() {

	});
	
	function changeDiaryType() {
		var type = $('#selectType').val();
		window.location.href = "${contextPath}/profile/list/${owner.userId}?type=" + type;
	}
	
	function submitPage(pageNum) {
		var type = $('#selectType').val();
		window.location.href = "${contextPath}/profile/list/${owner.userId}?type=" + type + "&pageNum=" + pageNum;
	}
	
</script>

<%};%> 


<% var layoutParas =
{"pageLevelCSS":pageLevelCSS,"pageLevelJS":pageLevelJS};
layout("/template/layout/profileLayout.html", layoutParas){ %>



<div class="am-g">
	
	<div class="am-u-sm-12 am-u-md-3">
		<div class="am-form-group">
			<select id="selectType" data-am-selected="{btnSize: 'sm'}" onchange="changeDiaryType()">

				<% if (type==0) { %>
					<option selected="selected" value="0">所有类别</option>
				<% } else { %>
					<option value="0">所有类别</option>
				<% } %>

				<% for (diaryTypeEnum in diaryTypeEnums){ %>
					<% if (type == diaryTypeEnum.type) { %>
						<option selected="selected" value="${diaryTypeEnum.type}">${diaryTypeEnum.desc}</option>
					<% } else { %>
						<option value="${diaryTypeEnum.type}">${diaryTypeEnum.desc}</option>
					<% } %>

				<% } %>
				
			</select>
		</div>
	</div>
	<div class="am-u-sm-12 am-u-md-3">
		<!-- <div class="am-input-group am-input-group-sm">
			<input type="text" class="am-form-field"> <span
				class="am-input-group-btn">
				<button class="am-btn am-btn-default" type="button">搜索</button>
			</span>
		</div> -->
	</div>
</div>

<hr>

<div class="am-g">
	<div class="am-u-sm-12">
		<form class="am-form" action="javascript:void(0)">
			<table class="am-table am-table-striped am-table-hover table-main">
				<thead>
					<tr>
						<!-- <th class="table-id">ID</th> -->
						<th class="table-title">标题</th>
						<th class="table-type">类别</th>
						<th class="table-date am-hide-sm-only">日期</th>
						<th class="table-type">天气</th>
						<th class="table-type">私密性</th>
					</tr>
				</thead>
				<tbody>
					<% if (diaries != null && diaries.~size > 0) { %>
						<% for (diary in diaries){ %>
						<tr id='tr-${diary.diaryId}'>
							<!-- <td>${diary.diaryId}</td> -->
							<td><a onclick="preViewDiary('${diary.diaryId}', '${diary.privateType}')" href="javascript:void(0)">${diary.title}</a></td>
							<td class="am-hide-sm-only">${diaryTypeMap[diary.type]}</td>
							<td><% utcFormatFunction(diary.date, 'yyyy-MM-dd'); %></td>
							<td class="am-hide-sm-only">${weatherMap[diary.weather]}</td>
							<td class="am-hide-sm-only">${privateTypeMap[diary.privateType]}</td>
						</tr>
					<% } } %>

				</tbody>
			</table>

			<% if (diaries != null && diaries.~size > 0) {
			include("/static/inc/page.inc"){}; }%>

			<hr />
		</form>
	</div>

</div>




<%} %>
