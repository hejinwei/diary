<!DOCTYPE html>
<html>
<head lang="zh">
  <meta charset="UTF-8">
  <title>登录</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <META NAME="Title" CONTENT="XM日记">
  <META NAME="Description" CONTENT="XM日记">
  <META NAME="Keywords" CONTENT="XM日记">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="format-detection" content="telephone=no">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <link rel="alternate icon" type="image/png" href="${contextPath}/static/assets/i/favicon.ico">
  <link rel="stylesheet" href="${contextPath}/static/assets/css/amazeui.min.css"/>
  
  <style>
    .header {
      text-align: center;
    }
    .header h1 {
      font-size: 200%;
      color: #333;
      margin-top: 30px;
    }
    .header p {
      font-size: 14px;
    }
  </style>
  
  <!-- <script type="text/javascript" src="${contextPath}/static/jquery-3.0.0.min.js"></script> -->
  <script src="${contextPath}/static/assets/js/jquery.min.js"></script>
</head>
<body>
<div class="header">
  <div class="am-g">
    <h1>${webName}</h1>
    <p>${webIntroduction}</p>
  </div>
  <hr />
</div>
<div class="am-g">
  <div class="am-u-lg-6 am-u-md-8 am-u-sm-centered">
    <h3>登录</h3>
    <hr>
    <div class="am-btn-group">
      <a href="#" class="am-btn am-btn-secondary am-btn-sm"><i class="am-icon-github am-icon-sm"></i> Github</a>
      <a href="#" class="am-btn am-btn-success am-btn-sm"><i class="am-icon-google-plus-square am-icon-sm"></i> Google+</a>
      <a href="#" class="am-btn am-btn-primary am-btn-sm"><i class="am-icon-stack-overflow am-icon-sm"></i> stackOverflow</a>
    </div>
    <br>
    <br>

    <form method="post" class="am-form">
      <label for="name">用户名:</label>
      <input type="text" name="name" id="name" value="">
      <br>
      <label for="password">密码:</label>
      <input type="password" name="password" id="password" value="">
      <br>
      <!-- <label for="remember-me">
        <input id="remember-me" type="checkbox">
        记住密码
      </label> -->
      <br />
      <div class="am-cf" style="align:center;">
        <input onclick="doLogin()" type="button" name="" value="登 录" class="am-btn am-btn-primary">
        
        &nbsp;&nbsp;&nbsp;&nbsp;
        
        <a href='register' class="am-btn am-btn-success">去注册</a>
        
        <input type="button" name="" value="忘记密码 ^_^? " class="am-btn am-btn-default am-btn-sm am-fr" onclick="forgetPassword()">
      </div>
    </form>
    <hr>
    <p>版权--W</p>
  </div>
</div>
</body>

<script type="text/javascript">

	function forgetPassword() {
		window.location.href="${contextPath}/forgetPassword";
	}

	function doLogin() {
		var name = $('#name').val();
		var password = $('#password').val();
		
		$.ajax( {  
		    url:'doLogin', 
		    data:{  
		             name : name,  
		             password : password 
		    },
		    type:'post',  
		    cache:false,  
		    dataType:'json',
		    success:function(data) {
		    	console.log(data);
		    	data = eval("(" + data + ")");
		        if(data.code == 0 ){
		        	console.log('登录成功');
		            window.location.href = 'mine'  
		        }else{  
		            alert(data.desc); 
		        }  
		     },  
		     error : function() {  
		          alert("异常！");  
		     }  
		});
	}
	
	function register() {
		window.location.href = 'register';
	}

</script>


</html>
